{
  "hash": "b3cc38635c977e7f8453c8f8c1251a3b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Nutrients\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(here)\n\nsource(here(\"_common.R\"))\n\nnutrients <- \n  read_csv(\n    here(\"data\", \"nutrients.csv\"),\n    col_types = cols(location = col_factor(levels = locations), formula = col_factor())\n  ) |> \n  mutate(season = make_season(date))\n\nfilter_organic <- function(data){\n  data |> filter(formula %in% c(\"toc\", \"ton\"))\n}\n\nfilter_inorganic <- function(data){\n  data |>\n    filter(formula %in% c(\"silicate\", \"phosphate\", \"ammonium\", \"nitrates_and_nitrites\"))\n}\n```\n:::\n\n## Overview\n\n::: {.cell}\n\n```{.r .cell-code}\nnutrients |> \n  filter(conc > 0) |> \n  ggplot(aes(x = conc, fill = formula)) +\n  geom_density(color = \"black\", alpha = .5) +\n  scale_fill_discrete(labels = labels_formula) +\n  scale_x_log10(labels = scales::label_number()) +\n  labs(x = \"concentration (μM)\", fill = \"\", color = \"\") +\n  theme_classic() +\n  theme(legend.position = \"inside\", legend.position.inside = c(.2, .7))\n```\n\n::: {.cell-output-display}\n![](nutrients_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n## Organic nutrients distribution\n\n::: {.cell}\n\n```{.r .cell-code}\nnutrients |>\n  filter(conc > 0) |> \n  filter_organic() |> \n  ggplot(aes(y = fct_rev(location), x = conc)) +\n  geom_boxplot(outliers = F) +\n  geom_jitter(alpha = .3, width = .3) +\n  facet_wrap(~ formula, scales = \"free_x\", labeller = as_labeller(labels_formula)) +\n  scale_y_discrete(labels = labels_location) +\n  scale_x_log10() +\n  labs(x = \"concentration (μM)\", y = \"\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](nutrients_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnutrients |> \n  filter_organic() |> \n  filter_analysis() |> \n  ggplot(aes(x = date, conc, shape = location, color = location)) +\n  geom_point() +\n  facet_wrap(\n    ~ formula, nrow = 2, scale = \"free_y\", labeller = as_labeller(labels_formula)\n  ) +\n  scale_shape_discrete(labels = labels_location) +\n  scale_color_discrete(labels = labels_location) +\n  scale_y_log10() +\n  labs(y = \"concentration (μM)\", shape = \"\", color = \"\") +\n  theme_classic() +\n  theme(axis.title.x = element_blank(), legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](nutrients_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnutrients |> \n  filter_organic() |> \n  filter_analysis() |> \n  ggplot(aes(x = season, conc)) +\n  geom_boxplot(outliers = F) +\n  facet_wrap(\n    ~ formula, nrow = 2, scale = \"free_y\",\n    labeller = as_labeller(labels_formula)\n    ) +\n  geom_jitter(alpha = .3, width = .3) +\n  scale_x_discrete(labels = labels_season) +\n  scale_y_log10() +\n  labs(x = \"\", y = \"concentration (μM)\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](nutrients_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnutrients |> \n  filter_organic() |> \n  filter_analysis() |> \n  ggplot(aes(x = season, conc)) +\n  geom_boxplot(outliers = F) +\n  facet_grid(\n    location ~ formula, scale = \"free_y\",\n    labeller = as_labeller(c(labels_formula, labels_location))\n  ) +\n  geom_jitter(alpha = .3, width = .3) +\n  scale_x_discrete(labels = labels_season) +\n  scale_y_log10() +\n  labs(x = \"\", y = \"concentration (μM)\") +\n  theme_classic() +\n  theme(axis.text.x = element_text(angle = 20, vjust = .5))\n```\n\n::: {.cell-output-display}\n![](nutrients_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n## Inorganic nutrients distribution\n\n::: {.cell}\n\n```{.r .cell-code}\nnutrients |>\n  filter(conc > 0) |> \n  filter_inorganic() |> \n  ggplot(aes(y = location, x = conc)) +\n  geom_boxplot(outliers = F) +\n  facet_wrap(~ formula, scales = \"free_x\", labeller = as_labeller(labels_formula)) +\n  scale_y_discrete(labels = labels_location) +\n  scale_x_log10() +\n  labs(x = \"concentration (μM)\", y = \"\") +\n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](nutrients_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnutrients |> \n  filter(conc > 0) |> \n  filter_inorganic() |> \n  filter_analysis() |> \n  ggplot(aes(x = date, conc, shape = location, color = location)) +\n  geom_jitter() +\n  facet_wrap(\n    ~ formula, nrow = 2, scale = \"free_y\", labeller = as_labeller(labels_formula)\n  ) +\n  scale_shape_discrete(labels = labels_location) +\n  scale_color_discrete(labels = labels_location) +\n  scale_y_log10() +\n  labs(y = \"concentration (μM)\", shape = \"\", color = \"\") +\n  theme_classic() +\n  theme(axis.title.x = element_blank(), legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](nutrients_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnutrients |> \n  filter(conc > 0) |> \n  filter_inorganic() |> \n  filter_analysis() |> \n  ggplot(aes(x = season, conc)) +\n  geom_boxplot(outliers = F) +\n  facet_wrap(\n    ~ formula, nrow = 2, scale = \"free_y\", labeller = as_labeller(labels_formula)\n  ) +\n  geom_jitter(alpha = .3, width = .3) +\n  scale_x_discrete(labels = labels_season) +\n  scale_y_log10() +\n  labs(x = \"\", y = \"concentration (μM)\") +\n  theme_classic() +\n  theme(axis.text.x = element_text(angle = 20, vjust = .5))\n```\n\n::: {.cell-output-display}\n![](nutrients_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnutrients |> \n  filter(conc > 0) |> \n  filter_inorganic() |> \n  filter_analysis() |> \n  ggplot(aes(x = season, conc)) +\n  geom_boxplot(na.rm = T, outliers = F) +\n  facet_grid(\n    location ~ formula, scale = \"free\",\n    labeller = as_labeller(c(labels_formula, labels_location))\n  ) +\n  geom_jitter(na.rm = T, alpha = .3, width = .3) +\n  scale_x_discrete(labels = labels_season) +\n  scale_y_log10() +\n  labs(x = \"\", y = \"concentration (μM)\") +\n  theme_classic() +\n  theme(axis.text.x = element_text(angle = 90, vjust = .5))\n```\n\n::: {.cell-output-display}\n![](nutrients_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n",
    "supporting": [
      "nutrients_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}